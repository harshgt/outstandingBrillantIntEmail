<template>

    <lightning-card  title = "Opportunity List">
        <lightning-button  variant="brand" label="Send Email" title="Primary action" onclick={handleClick} class="slds-align_absolute-center"></lightning-button>
        
        <template lwc:if={data1}>
            <ul class="slds-m-around_medium">
    
    
                <lightning-datatable                             
                            key-field="Id"                                                      
                            data={data1} 
                            columns={columns}
                            onrowaction={handleRowAction}
                            >
                </lightning-datatable>
    
    
                
        
    
          
    
                <!-- <table>
    
                    <tr>
                        <th>Id</th>
                        <th>Name</th>
                        <th>Stage Name</th>
                        <th>Amount</th>
                        <th>Email</th>
                    </tr>
    
    
                </table>
    
                <template for:each={data1} for:item="da12">
    
                    <li key={da12.Id}>
                        <table>
                            <tr>
                                <td>{da12.Id}</td>
                                <td>{da12.Name}</td>
                                <td>{da12.StageName}</td>
                                <td>{da12.Amount}</td>
                                <td><lightning-button-icon aria-setsize="30" icon-name="custom:custom23" variant="bare"
                                        alternative-text="Settings" title="Settings"></lightning-button-icon></td>
                            </tr>
                        </table>
    
                    </li>
                </template> -->
    
    
    
            </ul>
        </template>
    
        <template lwc:elseif={data1}>
            <p>Data not Found</p>
        </template>






        <template if:true={isShowModal}>

            <!--
                I Used SLDS for this code
                Here is link https://www.lightningdesignsystem.com/components/modals/
            --> 

            <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open slds-modal_medium">
                <div class="slds-modal__container">
        <!-- modal header start -->
          <header class="slds-modal__header">
             <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox}>
                <lightning-icon icon-name="utility:close"
                   alternative-text="close"
                   variant="inverse"
                   size="small" ></lightning-icon>
                <span class="slds-assistive-text">Close</span>
             </button>
             <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">SHOW RECORD</h2>
          </header>
      
          <!-- modal body start -->
          <div class="slds-modal__content" id="modal-content-id-1">
                
            <!-- record for the account  -->
           
             <!-- <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped">
                <thead>
                <tr >
                   
                    <th scope="col"><div class="slds-truncate">Id</div></th>
                    <th scope="col"><div class="slds-truncate">Name</div></th>
                    <th scope="col"><div class="slds-truncate">Email</div></th>
                    <th scope="col"><div class="slds-truncate">MobilePhone</div></th>
                    <th scope="col"><div class="slds-truncate">Account.Name</div></th>

                    
                </tr>
                </thead>
        
                <tbody>
                <template for:each={data2} for:item="sobKey">
                <tr key={sobKey.Id}>
                       
                        
                        <td><div>{sobKey.Id}</div></td>
                        <td><div>{sobKey.Name}</div></td>
                        <td><div>{sobKey.Email}</div></td>
                        <td><div>{sobKey.MobilePhone}</div></td>
                        <td><div>{sobKey.Account.Name}</div></td>

                    </tr>
                </template>
             </tbody>
             </table> --> 


             <div class="slds-m-around_medium">  
                <template if:true={data2}>      
                    <lightning-datatable 
                        key-field="Id" 
                        data={data2} 
                        columns={columns1} 
                        onrowselection={onRowSelection}
                        show-row-number-column="true">
                         
                    </lightning-datatable>  
                </template>      
                <template if:true={error}>  
                    {error}>                  
                </template>  
            </div>  
        
                   
                 
                
        
        
                    
                          
          </div>

          <!-- modal footer start-->
          <footer class="slds-modal__footer">
           
            <lightning-button  variant="brand" label="Send Email" title="Primary action" class="slds-button slds-button_brand" onclick={sendEmail}></lightning-button>
        
             <button class="slds-button slds-button_neutral" onclick={hideModalBox}>Cancel</button>

          </footer>
       
       </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
 </template>
 <!-- modal end -->





<!-- modal show show -->



<template if:true={isShowModal12}>

           

    <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01" class="slds-modal slds-fade-in-open slds-modal_medium">
        <div class="slds-modal__container">
<!-- modal header start -->
  <header class="slds-modal__header">
     <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={hideModalBox12}>
        <lightning-icon icon-name="utility:close"
           alternative-text="close"
           variant="inverse"
           size="small" ></lightning-icon>
        <span class="slds-assistive-text">Close</span>
     </button>
     <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">SHOW RECORD</h2>
  </header>

  <!-- modal body start -->
  <div class="slds-modal__content" id="modal-content-id-2">
        
    <!-- record for the account  -->
   
    

     <div class="slds-m-around_medium"> 
        <template if:true={rest}>   
            <lightning-datatable 
                        key-field="Id" 
                        data={rest} 
                        columns={columns2} 
                        hide-checkbox-column="true"
                        >
                         
                    </lightning-datatable> 
           
        </template> 
        <template if:false={rest}> 
            data not found
            </template>

         
         
    </div>  

   
            
                  
  </div>

  <!-- modal footer start-->
  <footer class="slds-modal__footer">
   
   
     <button class="slds-button slds-button_neutral" onclick={hideModalBox12}>Cancel</button>

  </footer>

</div>
</section>
<div class="slds-backdrop slds-backdrop_open"></div>
</template>




<!-- modal end -->
 

    </lightning-card>

    



</template>